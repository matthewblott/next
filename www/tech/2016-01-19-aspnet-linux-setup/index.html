<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-77648562-1"></script>
  
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="One two buckle shoe">
  <title>ASP.NET Mono Setup (or Mono Linux Setup Part 2)</title>
  <!-- <link rel="stylesheet" href="/assets/css/theme-light.css" media="(prefers-color-scheme: light)"> -->
  <!-- <link rel="stylesheet" href="/assets/css/theme-dark.css" media="(prefers-color-scheme: dark)"> -->
  <link rel="stylesheet" href="/assets/css/theme-light.css">
  
  <link rel="stylesheet" href="/assets/css/site.css">
  
  <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/prism/9000.0.1/themes/prism-okaidia.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="/pagefind/pagefind-ui.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
</head>

<body><header>
  <a href="/" class="logo">
    <span>
      CCH
    </span>
    <svg viewBox="-10 0 660 512">
      <use href="/assets/img/coffee.svg#x"></use>
    </svg>
  </a>
  <nav>
    <a href="/">Home</a>
    <a href="/about">About</a> 
    <span><a id="show-search">Click here</a> for search or press Cmd+K</span>
  </nav>
  <span>
  </span>
</header>

  <main>
    <article>
      <h1>ASP.NET Mono Setup (or Mono Linux Setup Part 2)</h1> 
      <h2>2016-01-19</h2>
      <p>This is the second entry of my posts on working with .NET (Mono) on Linux. The <a href="/tech/2015/12/09/mono-linux-setup.html">first</a> installment showed how to install Mono on Linux and execute a very basic C# program. Next I'll go through the steps for setting up <a href="http://ASP.NET">ASP.NET</a> itself and running a website. As mentioned in my previous post there's a dearth of articles and help for us .NET programmers coming over to the world of Linux so I want to do a bit more than just show a few steps but actually document what I've done to get things up and running in the real world.</p>
<pre class="language-shell"><code class="language-shell"></code></pre>
<p>Okay first fire up your Linux VM and login then install the nginx webserver.</p>
<pre class="language-shell"><code class="language-shell">
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> nginx
</code></pre>
<p>We'll use nginx as a reverse proxy for fastcgi which is what will be doing all the work. This is an exmaple of where you can find yourself getting caught out with Mono as I found a lot of the documentation referenced the fastcgi version for Mono's .NET 2.0 implementation. Anyhow, to install the correct version for this tutorial run the following command.</p>
<pre class="language-shell"><code class="language-shell">
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> mono-fastcgi-server4
</code></pre>
<p>There are a couple of additions that need to be made to the fastcgi parameters file so run the following command to open it up in vim.</p>
<pre class="language-shell"><code class="language-shell">
<span class="token function">sudo</span> <span class="token function">vi</span> /etc/nginx/fastcgi_params
</code></pre>
<p>And add the following to the file (actually I'm not sure it makes any difference if it's at the top or the bottom but I added the entries to the top). If the entires exist already then just amend them to what I have them as below.</p>
<pre class="language-shell"><code class="language-shell">
fastcgi_param   PATH_INFO               <span class="token string">""</span><span class="token punctuation">;</span>
fastcgi_param   SCRIPT_FILENAME         <span class="token variable">$document_root</span><span class="token variable">$fastcgi_script_name</span><span class="token punctuation">;</span>
</code></pre>
<p>Then save and quit using the <code>!wq</code> commands for vim (explained in the previous post). Great, now everything's in place for serving websites. Create a www directory for storing the websites.</p>
<pre class="language-shell"><code class="language-shell">
<span class="token function">mkdir</span> ~/www
</code></pre>
<p>Then create a directory for a demo website itself.</p>
<pre class="language-shell"><code class="language-shell">
<span class="token function">mkdir</span> ~/www/aspnet
</code></pre>
<p>Then create an aspx file using vim.</p>
<pre class="language-shell"><code class="language-shell"><span class="token function">vi</span> ~/www/aspnet/Default.aspx
</code></pre>
<p>In the vim editor paste the following code - we'll use the ubiquitous 'Hello World' for our demo page :-)</p>
<pre class="language-csharp"><code class="language-csharp">
<span class="token operator">&lt;</span><span class="token operator">%</span>@ <span class="token class-name">Page</span> AutoEventWireup<span class="token operator">=</span><span class="token string">"true"</span> Language<span class="token operator">=</span><span class="token string">"C#"</span> ContentType<span class="token operator">=</span><span class="token string">"text/plain"</span> <span class="token operator">%</span><span class="token operator">></span>

<span class="token operator">&lt;</span><span class="token class-name">script</span> runat<span class="token operator">=</span><span class="token string">"server"</span><span class="token operator">></span>

  <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Page_Load</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> sender<span class="token punctuation">,</span> <span class="token class-name">EventArgs</span> e<span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>Response<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"Hello World!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
</code></pre>
<p>Save the changes with the <code>!wq</code> vim command. Now we'll create the configuration files so the site will work with nginx. Create a new file with vim.</p>
<pre class="language-shell"><code class="language-shell">
<span class="token function">sudo</span> <span class="token function">vi</span> /etc/nginx/sites-available/aspnet.conf
</code></pre>
<p>Now paste the following code into the new file and save the changes with the <code>!wq</code> vim command.</p>
<pre class="language-shell"><code class="language-shell">
server <span class="token punctuation">{</span>
        listen <span class="token number">80</span><span class="token punctuation">;</span>
        server_name aspnet.mono-demo<span class="token punctuation">;</span>

        location / <span class="token punctuation">{</span>
                root /home/deployer/www/aspnet/<span class="token punctuation">;</span>
                index index.html index.htm default.aspx Default.aspx<span class="token punctuation">;</span>
                fastcgi_index Default.aspx<span class="token punctuation">;</span>
                fastcgi_pass <span class="token number">127.0</span>.0.1:9000<span class="token punctuation">;</span>
                include /etc/nginx/fastcgi_params<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>The value next to <code>server_name</code> is your domain name. I'm using a local VM which has the name mono-demo but normally this would be the something like <a href="http://www.mysite.com">www.mysite.com</a>. The other values are self explanatory although you might notice there are two entries for the default aspx web page. This is a gotcha for anyone coming from the Windows world - path and file names with different cases are treated seperately. If a user browses for Default.aspx and your file is uploaded as default.aspx the request will be treated as a 404 so you have to cater for this.</p>
<p>Next create a symlink in the nginx sites-enabled folder to point to the previously created nginx config file by running the following commands.</p>
<pre class="language-shell"><code class="language-shell">
<span class="token function">sudo</span> <span class="token function">ln</span> <span class="token parameter variable">-s</span> /etc/nginx/sites-available/aspnet.conf /etc/nginx/sites-enabled/aspnet.conf
</code></pre>
<p>Restart the nginx service so our changes are picked up.</p>
<pre class="language-shell"><code class="language-shell">
<span class="token function">sudo</span> <span class="token function">service</span> nginx restart
</code></pre>
<p>Now we are finally ready to test our new web page and show some .NET code running. Run the following command.</p>
<pre class="language-shell"><code class="language-shell">
fastcgi-mono-server4 /applications<span class="token operator">=</span>/:/home/deployer/www/aspnet /socket<span class="token operator">=</span>tcp:127.0.0.1:9000
</code></pre>
<p>If you browse to the domain entry in your aspnet.conf file you should see your web page working.</p>
<p><picture><source type="image/webp" srcset="/.11ty/image/?src=src%2Fassets%2Fimg%2Fposts%2F20160107%2F2016-01-21%4022.11.20-sm.jpg&width=800&format=webp&via=transform 800w"><img src="/.11ty/image/?src=src%2Fassets%2Fimg%2Fposts%2F20160107%2F2016-01-21%4022.11.20-sm.jpg&width=800&format=jpeg&via=transform" alt="" width="800" height="720"></picture></p>
<p>That's all well and good but it isn't very practical to have a terminal open for each web site you want to run. This is where I started to experience some frustration as I really had to hunt around to find an adequate solution.</p>
<p><a href="https://fan0o.wordpress.com/2012/11/13/mono-and-nginx-for-asp-net">This</a> post pointed me in the right direction but this required putting all the configuration information for each site in the same file in the <code>/etc/init.d/</code> folder under root. Thankfully I came across the EPM Junkie blog which has a super helpful post <a href="http://epmjunkie.com/mono-fastcgi-startup-script">here</a> which tells me everything I need.</p>
<p>To tie everything up create the file <code>monoserve</code> by running the following command.</p>
<pre class="language-shell"><code class="language-shell">
<span class="token function">sudo</span> <span class="token function">vi</span> /etc/init.d/monoserve
</code></pre>
<p>And then copy and paste the following.</p>
<pre class="language-shell"><code class="language-shell">
<span class="token comment">#!/bin/bash</span>
<span class="token comment">### BEGIN INIT INFO</span>
<span class="token comment"># Provides: monoserve.sh</span>
<span class="token comment"># Required-Start: $local_fs $syslog $remote_fs</span>
<span class="token comment"># Required-Stop: $local_fs $syslog $remote_fs</span>
<span class="token comment"># Default-Start: 2 3 4 5</span>
<span class="token comment"># Default-Stop: 0 1 6</span>
<span class="token comment"># Short-Description: Start FastCGI Mono server with hosts</span>
<span class="token comment">### END INIT INFO</span>

<span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span>/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin
<span class="token assign-left variable">DAEMON</span><span class="token operator">=</span>/usr/bin/mono
<span class="token assign-left variable">NAME</span><span class="token operator">=</span>monoserver
<span class="token assign-left variable">DESC</span><span class="token operator">=</span>monoserver

<span class="token comment">## Begin -- MAKE CHANGES HERE --</span>
<span class="token assign-left variable">PROGRAM</span><span class="token operator">=</span>fastcgi-mono-server4 <span class="token comment"># The program which will be started</span>
<span class="token assign-left variable">ADDRESS</span><span class="token operator">=</span><span class="token number">127.0</span>.0.1 <span class="token comment"># The address on which the server will listen</span>
<span class="token assign-left variable">PORT</span><span class="token operator">=</span><span class="token number">9000</span> <span class="token comment"># The port on which the server will listen</span>
<span class="token assign-left variable"><span class="token environment constant">USER</span></span><span class="token operator">=</span>www-data <span class="token comment"># The user under which the process will run</span>
<span class="token assign-left variable">GROUP</span><span class="token operator">=</span><span class="token environment constant">$USER</span> <span class="token comment"># The group under which the process will run</span>
<span class="token assign-left variable">LOGFILE</span><span class="token operator">=</span>/var/log/mono/fastcgi.log
<span class="token comment">## End -- MAKE CHANGES HERE --</span>

<span class="token comment"># Determine the environment</span>
<span class="token assign-left variable">MONOSERVER</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">which</span> $PROGRAM<span class="token variable">)</span></span>
<span class="token assign-left variable">MONOSERVER_PID</span><span class="token operator">=</span><span class="token string">""</span>
<span class="token assign-left variable">FCGI_CONFIG_DIR</span><span class="token operator">=</span>/home/deployer/www/mono-fastcgi <span class="token comment"># /etc/mono/fcgi/apps-enabled</span>

<span class="token comment"># Start up the Mono server</span>
<span class="token function-name function">start_up</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    get_pid
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">"<span class="token variable">$MONOSERVER_PID</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        start-stop-daemon <span class="token parameter variable">-S</span> <span class="token parameter variable">-c</span> <span class="token environment constant">$USER</span><span class="token builtin class-name">:</span><span class="token variable">$GROUP</span> <span class="token parameter variable">-x</span> <span class="token variable">$MONOSERVER</span> -- <span class="token parameter variable">--appconfigdir</span> <span class="token variable">$FCGI_CONFIG_DIR</span> /socket<span class="token operator">=</span>tcp:<span class="token variable">$ADDRESS</span><span class="token builtin class-name">:</span><span class="token variable">$PORT</span> /logfile<span class="token operator">=</span><span class="token variable">$LOGFILE</span> <span class="token operator">&amp;</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"Mono FastCGI Server <span class="token variable">$PROGRAM</span> started as <span class="token environment constant">$USER</span> on <span class="token variable">$ADDRESS</span>:<span class="token variable">$PORT</span>"</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"Mono FastCGI Server is already running - PID <span class="token variable">$MONOSERVER_PID</span>"</span>
    <span class="token keyword">fi</span>
<span class="token punctuation">}</span>

<span class="token comment"># Shut down the Mono server</span>
<span class="token function-name function">shut_down</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    get_pid
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">"<span class="token variable">$MONOSERVER_PID</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token function">kill</span> <span class="token variable">$MONOSERVER_PID</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"Mono FastCGI Server stopped"</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"Mono FastCGI Server is not running"</span>
    <span class="token keyword">fi</span>
<span class="token punctuation">}</span>

<span class="token comment"># Refresh the PID</span>
<span class="token function-name function">get_pid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token assign-left variable">MONOSERVER_PID</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">ps</span> auxf <span class="token operator">|</span> <span class="token function">grep</span> $PROGRAM.exe <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-v</span> <span class="token function">grep</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $2}'</span><span class="token variable">)</span></span>
<span class="token punctuation">}</span>

<span class="token keyword">case</span> <span class="token string">"<span class="token variable">$1</span>"</span> <span class="token keyword">in</span>
    start<span class="token punctuation">)</span>
        start_up
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
    stop<span class="token punctuation">)</span>
        shut_down
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
    restart<span class="token operator">|</span>force-reload<span class="token punctuation">)</span>
        shut_down
        start_up
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
    status<span class="token punctuation">)</span>
        get_pid
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">"<span class="token variable">$MONOSERVER_PID</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
            <span class="token builtin class-name">echo</span> <span class="token string">"Mono FastCGI Server is not running"</span>
        <span class="token keyword">else</span>
            <span class="token builtin class-name">echo</span> <span class="token string">"Mono FastCGI Server is running - PID <span class="token variable">$MONOSERVER_PID</span>"</span>
        <span class="token keyword">fi</span>
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
    *<span class="token punctuation">)</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"Usage: monoserve (start|stop|restart|force-reload|status)"</span>
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>

<span class="token builtin class-name">exit</span> <span class="token number">0</span>
</code></pre>
<p>As per the previous steps when using vim run the <code>!wq</code> command to save the changes. There's quite a lot going on in this file but the bits to note are the variables <code>FCGI_CONFIG_DIR</code> which points to a configuration file for our sites which we'll create in a minute and <code>USER</code> and <code>GROUP</code> which refer to the <code>www-data</code> user and group which our sites will run under and have lower level privileges and are a lot safer than running under root! To get the <code>monoserve</code> service to start after a reboot run the following.</p>
<p>UPDATE: I'm not sure if this was a mistake on my part or if it's because I've just tried this on a new version of Ubuntu than the one used when I wrote this tutorial but this step should be done after the execute permissions are set for the file (shown in the step after).</p>
<pre class="language-shell"><code class="language-shell">
<span class="token function">sudo</span> update-rc.d monoserve defaults
</code></pre>
<p>Then run the following so <code>monoserve</code> has the correct permssions.</p>
<pre class="language-shell"><code class="language-shell">
<span class="token function">sudo</span> <span class="token function">chmod</span> +x /etc/init.d/monoserve
</code></pre>
<p>There are a few gotchas referred to in the post mentioned above which are to do with folders and files not being present. We'll need to create them so run the following commands.</p>
<pre class="language-shell"><code class="language-shell">
<span class="token function">sudo</span> <span class="token function">mkdir</span> /var/log/mono
<span class="token function">sudo</span> <span class="token function">mkdir</span> /var/www
<span class="token function">sudo</span> <span class="token function">mkdir</span> /var/www/.mono
</code></pre>
<p>Set the correct permissions for the <code>.mono</code> folder.</p>
<pre class="language-shell"><code class="language-shell">
<span class="token function">sudo</span> <span class="token function">chown</span> <span class="token parameter variable">-R</span> www-data:www-data /var/www/.mono
</code></pre>
<p>There's also a log file that's referenced in <code>monoserve</code> that also needs to be created and the correct permissions set. First create the file.</p>
<pre class="language-shell"><code class="language-shell">
<span class="token function">sudo</span> <span class="token function">vi</span> /var/log/mono/fastcgi.log
</code></pre>
<p>If you create a file with the <code>vi filename</code> command it won't save anything if you haven't added any text so hit return to add some whitespace and then save the file with the <code>!wq</code> command and then set the correct permissions.</p>
<pre class="language-shell"><code class="language-shell">
<span class="token function">sudo</span> <span class="token function">chown</span> www-data:www-data /var/log/mono/fastcgi.log
</code></pre>
<p>The last folder we need to create for <code>monoserve</code> is the site configuration file so let's do that.</p>
<pre class="language-shell"><code class="language-shell">
<span class="token function">mkdir</span> ~/www/mono-fastcgi
</code></pre>
<pre class="language-shell"><code class="language-shell"></code></pre>
<pre class="language-shell"><code class="language-shell"></code></pre>
<pre class="language-shell"><code class="language-shell"></code></pre>
<p>That's everything setup for <code>monoserve</code> we're now ready to add a site. Basically the service will check for files that are suffixed with <code>.webapp</code> in the <code>~/www/mono-fastcgi</code> folder we created earlier. So let's create one for our demo app.</p>
<pre class="language-shell"><code class="language-shell">
<span class="token function">vi</span> ~/www/mono-fastcgi/aspnet.webapp
</code></pre>
<p>Copy and paste the following into the text editor. The ony change you may need to make is the <code>vhost</code> tag which is the domain name for the site.</p>
<pre class="language-xml"><code class="language-xml">
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>apps</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-application</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>aspnet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>vhost</span><span class="token punctuation">></span></span>aspnet.mono-demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>vhost</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>vport</span><span class="token punctuation">></span></span>80<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>vport</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>vpath</span><span class="token punctuation">></span></span>/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>vpath</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span><span class="token punctuation">></span></span>/home/deployer/www/aspnet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>path</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-application</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>apps</span><span class="token punctuation">></span></span>
</code></pre>
<p>Once again run <code>!wq</code> to save the changes.</p>
<p>Now let's start the <code>monoserve</code> service and also restart the <code>nginx</code> service.</p>
<pre class="language-shell"><code class="language-shell">
<span class="token function">sudo</span> <span class="token function">service</span> monoserve start
<span class="token function">sudo</span> <span class="token function">service</span> nginx restart
</code></pre>
<p>That's it! If you browse to the domain you set up for the site it should now view in the browser.</p>
<p>You can manage <code>monoserve</code> the same as any service by using the following commands.</p>
<pre class="language-shell"><code class="language-shell">
<span class="token function">sudo</span> <span class="token function">service</span> monoserve start
<span class="token function">sudo</span> <span class="token function">service</span> monoserve restart
<span class="token function">sudo</span> <span class="token function">service</span> monoserve stop
</code></pre>
<p>Everything is now in place to add more sites without too much fuss. A quick check list of the files you'll need to get a new site working with <code>monoserve</code> is below.</p>
<pre class="language-shell"><code class="language-shell">
<span class="token comment"># nginx site-name config file</span>
/etc/nginx/sites-available/site-name.conf

<span class="token comment"># symlink to /etc/nginx/sites-available/site-name.conf</span>
/etc/nginx/sites-enabled/site-name.conf

<span class="token comment"># monoserve site-name config file</span>
~/www/mono-fastcgi/site-name.webapp

<span class="token comment"># restart monoserve</span>
<span class="token function">sudo</span> <span class="token function">service</span> monoserve restart

<span class="token comment"># restart nginx</span>
<span class="token function">sudo</span> <span class="token function">service</span> monoserve restart
</code></pre>
<p>That's the end of this tutorial. I think it's fairly instructive for getting something up and running that can be used in production. There are a couple of things I haven't gone through to help with the work process but I'll likely be documenting these at a later date and they are somewhat out of the scope of what we're discussing here. Please add any comments below :-)</p>
<p>UPDATE 2: A new issue has come up as per <a href="http://stackoverflow.com/questions/24872394/access-to-the-path-etc-mono-registry-is-denied">this</a> Stack Overflow question. It was easily resolved by running the following commands but I've put it here as it's another gotcha to look out for.</p>
<pre class="language-shell"><code class="language-shell">
<span class="token function">sudo</span> <span class="token function">mkdir</span> /etc/mono/registry
<span class="token function">sudo</span> <span class="token function">chmod</span> uog+rw /etc/mono/registry
</code></pre>
<p>UPDATE 3 (2017-03-29): I just tried to set this up on a Digital Ocean VM and had a problem when i ran the <code>sudo update-rc.d monoserve defaults</code> command. This calls Perl and there was an issue with the locale settings. I found various solutions but the simplest seemed to be to reinstall the required packages with the following.</p>
<pre class="language-shell"><code class="language-shell">
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token parameter variable">--reinstall</span> locales <span class="token operator">&amp;&amp;</span> <span class="token function">sudo</span> dpkg-reconfigure locales
</code></pre>

    </article>
  </main><footer>
  <nav>
    <ul>
      <li><a href="">Home</a></li>
      <li><a href="">About</a></li>
    </ul>
    <ul>
      <li><a href="">Contact</a></li>
      <li><a href="">Blog</a></li>
    </ul>
    <ul>
      <li><a href="">GitHub</a></li>
      <li><a href="">Twitter</a></li>
    </ul>
  </nav>
</footer>

  <script src="/pagefind/pagefind-ui.js" defer=""></script>
  
  <script src="/assets/js/main.js"></script>
  
</body>
</html>
