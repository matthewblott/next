<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-77648562-1"></script>
  
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="One two buckle shoe">
  <title>Awk Is Easy To Use</title>
  <!-- <link rel="stylesheet" href="/assets/css/theme-light.css" media="(prefers-color-scheme: light)"> -->
  <!-- <link rel="stylesheet" href="/assets/css/theme-dark.css" media="(prefers-color-scheme: dark)"> -->
  <link rel="stylesheet" href="/assets/css/theme-light.css">
  
  <link rel="stylesheet" href="/assets/css/site.css">
  
  <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/prism/9000.0.1/themes/prism-okaidia.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="/pagefind/pagefind-ui.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
</head>

<body><header>
  <a href="/" class="logo">
    <span>
      CCH
    </span>
    <svg viewBox="-10 0 660 512">
      <use href="/assets/img/coffee.svg#x"></use>
    </svg>
  </a>
  <nav>
    <a href="/">Home</a>
    <a href="/about">About</a> 
    <span><a id="show-search">Click here</a> for search or press Cmd+K</span>
  </nav>
  <span>
  </span>
</header>

  <div id="search-panel">
    <div id="pagefind"></div>
  </div>
  <main>
    <article>
      <h1>Awk Is Easy To Use</h1> 
      <h2>The problem</h2>
<p>Unfortunately a lot of coding is dealing with boilerplate - assigning getters and setters to all the properties of a class for example. And because you're dealing with data a lot of the time this is database driven. The simplest way for me is inspecting the schema, for example this is how I'd pull up a list of columns for a table in SQL Server:</p>
<pre class="language-sql"><code class="language-sql">
<span class="token keyword">select</span> column_name <span class="token keyword">from</span> information_schema<span class="token punctuation">.</span><span class="token keyword">columns</span>
</code></pre>
<p>This would allow me to do something like the following:</p>
<pre class="language-sql"><code class="language-sql">
<span class="token keyword">select</span> <span class="token string">'public string '</span> <span class="token operator">+</span> column_name <span class="token operator">+</span> <span class="token string">'{ get; set; }'</span> <span class="token keyword">from</span> information_schema<span class="token punctuation">.</span><span class="token keyword">columns</span>
</code></pre>
<p>Which would product the following valid C# code which I could then copy and paste as needed:</p>
<pre class="language-csharp"><code class="language-csharp">
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> FirstName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> 
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> LastName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> 
<span class="token range operator">..</span><span class="token punctuation">.</span>
</code></pre>
<p>Sometimes I might do something similar in a spreadsheet. Assuming the contents of A1 in the cell below represents a field it would be something like:</p>
<pre><code>='public string ' &amp; A1 &amp; ' { get; set;}'


</code></pre>
<p>The above would produce the same valid C# code. I've been working with Rails and Sqlite recently and so I thought the spreadsheet option was going to be my approach but then I thought about trying something else.</p>
<p>I spend most of my time in the command line these days (I finally made the switch from IDE to Neovim!) and so I thought it would improve my workflow if I could use one of the command line tools. I've used <code>awk</code> but I always thought it would be too cumbersome, however I trid the <code>tldr</code> tool to get me going. Running this command for <code>awk</code> gave me the exact lines I needed:</p>
<pre class="language-bash"><code class="language-bash">
- Print the fifth <span class="token function">column</span> <span class="token punctuation">(</span>a.k.a. field<span class="token punctuation">)</span> <span class="token keyword">in</span> a space-separated file:
    <span class="token function">awk</span> <span class="token string">'{print $5}'</span> path/to/file

- Print all lines where the 10th <span class="token function">column</span> value equals the specified value:
    <span class="token function">awk</span> <span class="token string">'($10 == value)'</span> 

</code></pre>
<p>By running Sqllite's <code>pragma</code> command and piping the output I would then have my list of fields to work with. For example if I run the following for the Northwind datbase:</p>
<pre class="language-bash"><code class="language-bash">
sqlite3 northwind.sqllite3 <span class="token string">'pragma table_info(employees)'</span> 
</code></pre>
<p>I will end up with the following table data with the field values seperated by the pipe operator:</p>
<pre class="language-bash"><code class="language-bash">
<span class="token number">0</span><span class="token operator">|</span><span class="token function">id</span><span class="token operator">|</span>INTEGER<span class="token operator">|</span><span class="token number">1</span><span class="token operator">||</span><span class="token number">1</span>
<span class="token number">1</span><span class="token operator">|</span>last_name<span class="token operator">|</span>varchar<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token operator">|</span><span class="token number">1</span><span class="token operator">||</span><span class="token number">0</span>
<span class="token number">2</span><span class="token operator">|</span>first_name<span class="token operator">|</span>varchar<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token operator">|</span><span class="token number">1</span><span class="token operator">||</span><span class="token number">0</span>
<span class="token number">3</span><span class="token operator">|</span>email<span class="token operator">|</span>varchar<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token operator">|</span><span class="token number">0</span><span class="token operator">||</span><span class="token number">0</span>
<span class="token punctuation">..</span>.
</code></pre>
<p>From the above result set I can see I need column 2 for my field name. And I can go further by inspecting the values of other fields such that if I want some Ruby code for validating the required fields (field 4) I can run the following:</p>
<pre class="language-bash"><code class="language-bash">
sqlite3 northwind.sqlite3 <span class="token string">'pragma table_info(employees)'</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token parameter variable">-F</span> <span class="token string">'|'</span> <span class="token string">'($4 == 1) {print "validates :" $2 ", presence: true "}'</span>
</code></pre>
<p>Which will then product the correct ruby I can copy and paste:</p>
<pre class="language-ruby"><code class="language-ruby">
validates <span class="token symbol">:last_name</span><span class="token punctuation">,</span> <span class="token symbol">presence</span><span class="token operator">:</span> <span class="token boolean">true</span>
validates <span class="token symbol">:first_name</span><span class="token punctuation">,</span> <span class="token symbol">presence</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token operator">...</span>
</code></pre>
<p>Simple stuff. I imagine I will do it like this always from now on!</p>

    </article>
  </main><footer>
  <nav>
    <ul>
      <li><a href="">Home</a></li>
      <li><a href="">About</a></li>
    </ul>
    <ul>
      <li><a href="">Contact</a></li>
      <li><a href="">Blog</a></li>
    </ul>
    <ul>
      <li><a href="">GitHub</a></li>
      <li><a href="">Twitter</a></li>
    </ul>
  </nav>
</footer>


  <script src="/pagefind/pagefind-ui.js" defer=""></script>
  
  <script src="/assets/js/main.js"></script>
  

</body>
</html>
