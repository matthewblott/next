<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-77648562-1"></script>
  
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="One two buckle shoe">
  <title>DotNet Test With NUnit</title>
  <!-- <link rel="stylesheet" href="/assets/css/theme-light.css" media="(prefers-color-scheme: light)"> -->
  <!-- <link rel="stylesheet" href="/assets/css/theme-dark.css" media="(prefers-color-scheme: dark)"> -->
  <link rel="stylesheet" href="/assets/css/theme-light.css">
  
  <link rel="stylesheet" href="/assets/css/site.css">
  
  <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/prism/9000.0.1/themes/prism-okaidia.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="/pagefind/pagefind-ui.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
</head>

<body><header>
  <a href="/" class="logo">
    <span>
      CCH
    </span>
    <svg viewBox="-10 0 660 512">
      <use href="/assets/img/coffee.svg#x"></use>
    </svg>
  </a>
  <nav>
    <a href="/">Home</a>
    <a href="/about">About</a> 
    <span><a id="show-search">Click here</a> for search or press Cmd+K</span>
  </nav>
  <span>
  </span>
</header>

  <main>
    <article>
      <h1>DotNet Test With NUnit</h1> 
      <h2>2017-12-01</h2>
      <p>I wrote a post a few weeks ago <a href="https://coderscoffeehouse.com/tech/2017/08/27/exploring-the-dotnet-command.html">Exploring The DotNet Command</a> about ... well anyway one of the commands mentioned was the <code>test</code> command which is what this post is about.</p>
<p>There's some info on this in the official docs <a href="https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-test?tabs=netcore2x">here</a> with a few examples. To find out a list of the available switches (and their description) to use with <code>test</code> just type <code>dotnet test --help</code>. For example to list the available tests using the <code>--list-tests</code> switch run the following in your terminal.</p>
<pre class="language-shell"><code class="language-shell">
dotnet <span class="token builtin class-name">test</span> --list-tests
</code></pre>
<p>The following is a more complicated example: run all tests using a settings file, under release without building the project.</p>
<pre class="language-shell"><code class="language-shell">
dotnet <span class="token builtin class-name">test</span> <span class="token parameter variable">--settings</span> appsettings.json <span class="token parameter variable">--configuration</span> release --no-build
</code></pre>
<p>All good so far but as mentioned in the post I refer to at the start, I like to use NUnit and the only examples in the offical docs are for xUnit (which seems to be the new hotness) and MSTest. For the most part there aren't many differences to how you use the <code>test</code> command with each framework except for when using filters.</p>
<h2>Filters</h2>
<p>Filters are useful because they allow you to run specific tests rather than the whole test suite. I couldn't find any listings of the available NUnit filters so I decided to have a guess by running the following.</p>
<pre class="language-shell"><code class="language-shell">
dotnet <span class="token builtin class-name">test</span> <span class="token parameter variable">--filter</span> <span class="token assign-left variable">Hello</span><span class="token operator">=</span>x
</code></pre>
<p>This printed out the following.</p>
<p><picture><source type="image/webp" srcset="/.11ty/image/?src=src%2Fassets%2Fimg%2Fposts%2F20171209%2F224440-md.jpg&width=1200&format=webp&via=transform 1200w"><img src="/.11ty/image/?src=src%2Fassets%2Fimg%2Fposts%2F20171209%2F224440-md.jpg&width=1200&format=jpeg&via=transform" alt="" width="1200" height="761"></picture></p>
<p>Which tells us the available filters are <code>FullyQualifiedName</code>, <code>Name</code>, <code>Priority</code> and <code>TestCategory</code>. The available operators are listed in the official docs and they are <code>=</code> (equals), <code>!=</code> (does not equal) and <code>~</code> (contains) with both <code>|</code> (or) and <code>&amp;</code> (and) for more complicated scenarios.</p>
<h3>Examples</h3>
<p>We'll use the following test case for our examples.</p>
<pre class="language-csharp"><code class="language-csharp">
<span class="token keyword">using</span> <span class="token namespace">NUnit<span class="token punctuation">.</span>Framework</span><span class="token punctuation">;</span>

<span class="token keyword">namespace</span> <span class="token namespace">nunit_exercise</span>
<span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Tests</span>
  <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Test</span></span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Category</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"Foo"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      Assert<span class="token punctuation">.</span><span class="token function">Pass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Test</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      Assert<span class="token punctuation">.</span><span class="token function">Pass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Running an individual test is pretty straightforward, you can use the <code>Name</code> filter like so.</p>
<pre class="language-shell"><code class="language-shell">
dotnet <span class="token builtin class-name">test</span> <span class="token parameter variable">--filter</span> <span class="token assign-left variable">Name</span><span class="token operator">=</span>Test1
</code></pre>
<p>The <code>Category</code> filter is probably the simplest way to group tests. The filter corresponds to the attribute of the same name which can be used at either the class or method level (as shown in the example below). So to run all tests under <code>Foo</code> execute the following.</p>
<pre class="language-shell"><code class="language-shell">
dotnet <span class="token builtin class-name">test</span> <span class="token parameter variable">--filter</span> <span class="token assign-left variable">TestCategory</span><span class="token operator">=</span>Foo
</code></pre>
<p>This is great but I don't use <code>Category</code> myself but wanted a convenient way to group tests without having to add unwanted attributes to my test cases. I found the best way to do this is to use the <code>FullyQualifiedName</code> filter and the <code>~</code> (contains) operator. I could also use the <code>Name</code> filter but it might be you have test methods of the same name in different classes. To run the tests in the <code>Tests</code> class from the our above example execute the following.</p>
<pre class="language-shell"><code class="language-shell">
dotnet <span class="token builtin class-name">test</span> <span class="token parameter variable">--filter</span> FullyQualifiedName~nunit_exercise.Tests
</code></pre>
<p>Basically after the <code>~</code> operator type the value <code>namespace.className</code>. You can filter this down further if you wish using the name (you might only want to run certain tests in one class for example) which would follow the rule <code>namespace.className.StartOfTestName</code>.  For example the following will also run all tests in the <code>Tests</code> class.</p>
<pre class="language-shell"><code class="language-shell">
dotnet <span class="token builtin class-name">test</span> <span class="token parameter variable">--filter</span> FullyQualifiedName~nunit_exercise.Tests.Test
</code></pre>
<p>This includes all tests in the class prefixed with <code>Test</code> so if another test is added that doesn't start the same it won't be included.</p>
<p>That's it for this one! <a href="https://docs.microsoft.com/en-us/dotnet/core/testing/selective-unit-tests">Here's</a> some further reading on using filters :-)</p>

    </article>
  </main><footer>
  <nav>
    <ul>
      <li><a href="">Home</a></li>
      <li><a href="">About</a></li>
    </ul>
    <ul>
      <li><a href="">Contact</a></li>
      <li><a href="">Blog</a></li>
    </ul>
    <ul>
      <li><a href="">GitHub</a></li>
      <li><a href="">Twitter</a></li>
    </ul>
  </nav>
</footer>

  <script src="/pagefind/pagefind-ui.js" defer=""></script>
  
  <script src="/assets/js/main.js"></script>
  
</body>
</html>
