<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-77648562-1"></script>
  
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="One two buckle shoe">
  <title>Using Git Submodules</title>
  <!-- <link rel="stylesheet" href="/assets/css/theme-light.css" media="(prefers-color-scheme: light)"> -->
  <!-- <link rel="stylesheet" href="/assets/css/theme-dark.css" media="(prefers-color-scheme: dark)"> -->
  <link rel="stylesheet" href="/assets/css/theme-light.css">
  
  <link rel="stylesheet" href="/assets/css/site.css">
  
  <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/prism/9000.0.1/themes/prism-okaidia.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="/pagefind/pagefind-ui.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
</head>

<body><header>
  <a href="/" class="logo">
    <span>
      CCH
    </span>
    <svg viewBox="-10 0 660 512">
      <use href="/assets/img/coffee.svg#x"></use>
    </svg>
  </a>
  <nav>
    <a href="/">Home</a>
    <a href="/about">About</a> 
    <span><a id="show-search">Click here</a> for search or press Cmd+K</span>
  </nav>
  <span>
  </span>
</header>

  <main>
    <article>
      <h1>Using Git Submodules</h1> 
      <h2>2021-12-09</h2>
      <p>I was never happy including blog posts with this blog's main repo. It's the easiest way to work but content and architecture should really be separate. I'd heard about git submodules a while ago but had never used them and thought this would be a good place to try.</p>
<p>I have two folders for posts <code>tech</code> and <code>other-posts</code> and it makes sense to have these in their own repo and include these as submodules. It seemed fairly staightforward. To add a repo as a submodule you execute the following:</p>
<pre class="language-bash"><code class="language-bash">
<span class="token function">git</span> submodule <span class="token function">add</span> https://github.com/user-name/repo-name local-folder-name

</code></pre>
<p>The <code>local-folder-name</code> argument is optional but in my case I wanted a short folder name and not the longer name of the repo. However, I hit some problems similar to this StackOverflow question <a href="https://stackoverflow.com/questions/16074832/cannot-push-to-git-repository-on-bitbucket">here</a>. I was already using ssh for my Github connections so I was a bit confused. In the end I deleted all my ssh keys on my Github account and tried from scratch but this didn't help. It turns out you need to make an amendment to the <code>.gitconfig</code> file:</p>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">[</span>url <span class="token string">"ssh://git@github.com/"</span><span class="token punctuation">]</span>
  insteadOf <span class="token operator">=</span> https://github.com/
<span class="token punctuation">[</span>user<span class="token punctuation">]</span>
  email <span class="token operator">=</span> name@example.com
  name <span class="token operator">=</span> Your Name</code></pre>
<p>All these entries are important if you're using ssh, including name and email address. It isn't obvious but if you try to use something other than <code>https</code> with the git commands then it won't work (I'm using Debian and it's possible it's a Linux issue from a quick Google search).</p>
<p>If you run the <code>ssh -T git@github.com</code> you will likely see the following message:</p>
<pre><code>successfully authenticated but github does not provide shell access
</code></pre>
<p>Again, this threw me somewhat and was the reason why I spent time tinkering with the <code>https</code> addresses (changing them to use ssh) all to no avail. If you have everything configured as above then the message can be ignored.</p>
<h3>A couple of other gotchas ...</h3>
<p>As anyone knows Debian isn't the most up to date and if you want something other than an empty folder with your submodule then you need to run the following with older Git versions:</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">git</span> submodule update <span class="token parameter variable">--init</span> <span class="token parameter variable">--recursive</span></code></pre>
<p>Also, if you're having issues adding a submodule and wonder why it might be you've already tried and there's a reference to it that's hard to spot. Check the <code>.git/modules/</code> folder and remove any entries you see that you're having problems with. I was pulling my hair out with this one trying to add my <code>other-posts</code> folder but once I deleted the entry in the Git folder everything worked.</p>
<h3>Useful Links</h3>
<ul>
<li><a href="https://stackoverflow.com/questions/16074832/cannot-push-to-git-repository-on-bitbucket">Cannot push to Git repository on Bitbucket</a></li>
<li><a href="https://gist.github.com/developius/c81f021eb5c5916013dc">Setup SSH keys for use with GitHub/GitLab/BitBucket etc </a></li>
<li><a href="https://dev.to/jjokah/submodules-a-git-repo-inside-a-git-repo-36l9">SUBMODULES: A git repo inside a git repo</a></li>
</ul>

    </article>
  </main><footer>
  <nav>
    <ul>
      <li><a href="">Home</a></li>
      <li><a href="">About</a></li>
    </ul>
    <ul>
      <li><a href="">Contact</a></li>
      <li><a href="">Blog</a></li>
    </ul>
    <ul>
      <li><a href="">GitHub</a></li>
      <li><a href="">Twitter</a></li>
    </ul>
  </nav>
</footer>

  <script src="/pagefind/pagefind-ui.js" defer=""></script>
  
  <script src="/assets/js/main.js"></script>
  
</body>
</html>
